services:
  keycloak:
    image: quay.io/keycloak/keycloak:26.2.0
    container_name: ce-keycloak-test
    ports:
      - 8180:8080
    environment:
      - KC_BOOTSTRAP_ADMIN_USERNAME=admin
      - KC_BOOTSTRAP_ADMIN_PASSWORD=admin
    command:
      - start-dev
      - --import-realm
      - --spi-theme-static-max-age=1 
      - --spi-theme-cache-themes=false
      - --spi-theme-cache-templates=false
    volumes:
      - ./frontend/keycloak-themes:/opt/keycloak/themes
      - ./realm-export.json:/opt/keycloak/data/import/realm-export.json

  minio:
    image: quay.io/minio/minio
    container_name: ce-minio-test
    ports:
      - 9000:9000
      - 9001:9001
    environment:
      - MINIO_ROOT_USER=admin
      - MINIO_ROOT_PASSWORD=admin123
    command: server /data --console-address ":9001"
    volumes:
    - ./minio/data:/data

volumes:
  minio-data:

